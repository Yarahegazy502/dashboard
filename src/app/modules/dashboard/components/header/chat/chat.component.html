<div class="notificaton general-dropdown chat">
  <div (clickOutside)="collapsed == true ? collapsed = false : '' " >
    <a
      class="dropdown-toggle position-relative d-flex align-items-center "
      type="button"
        (click)="collapsed = !collapsed"
    >
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path opacity="0.3" d="M20 3H4C2.89543 3 2 3.89543 2 5V16C2 17.1046 2.89543 18 4 18H4.5C5.05228 18 5.5 18.4477 5.5 19V21.5052C5.5 22.1441 6.21212 22.5253 6.74376 22.1708L11.4885 19.0077C12.4741 18.3506 13.6321 18 14.8167 18H20C21.1046 18 22 17.1046 22 16V5C22 3.89543 21.1046 3 20 3Z" fill="currentColor"></path>
      <rect x="6" y="12" width="7" height="2" rx="1" fill="currentColor"></rect>
      <rect x="6" y="7" width="12" height="2" rx="1" fill="currentColor"></rect>
    </svg>
    <div class="pulse-chat position-absolute"></div>
    </a>
    <div class="dropdown-chat bg-white-color position-fixed round border-0"  [class.trans]="collapsed">
      <div class="d-flex justify-content-between align-items-center mx-3 pt-3">
        <div>
          <h6  class="fw-bold text-dark mb-2">Brian Cox</h6>
          <div class="d-flex align-items-center">
            <div class="active bg-success-color rounded-circle me-2"></div>
            <small> Active</small>
          </div>
        </div>
        <!-- <i class="fa-solid fa-ellipsis fs-5"></i> -->
        <div class="position-relative d-flex align-items-center">
          <div class="dropdown me-2">
            <a class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-ellipsis-vertical"></i>
            </a>

            <ul class="dropdown-menu child-dropdown-menu border-0 p-2 py-3 bg-white-color">
              <li><a class="dropdown-item round" href="#">Action</a></li>
              <li><a class="dropdown-item round" href="#">Another action</a></li>
              <li><a class="dropdown-item round" href="#">Something else here</a></li>
            </ul>
          </div>

          <a (click)="collapsed=false">
            <i class="fas fa-xmark fs-4 ms-2"></i>
          </a>
        </div>
      </div>
      <hr>
      <div  class="mx-2 pb-5 px-2 chat-messages" #t>
        <div *ngFor="let item of chat">
          <div class="mb-4" *ngIf="item.type=='one'">
            <div  >
              <div class="d-flex align-items-center mb-2">
                <div class="position-relative">
                  <img class="chat-img me-2 rounded-circle" [src]="item.img" alt="item.type">
                  <div class="pulse position-absolute user-active user-active2"[class.active-user]="activeUser"></div>
                </div>
              <h6 class="text-dark me-2 fw-bold fs-6">{{item.name}}</h6>
                <small>{{item.createdAt | timeago}}</small>
              </div>
              <div class="w-fit-content chat-text  position-relative p-3  text-one round">
                <p class="fs-8 text-dark lh-sm">{{item.text}}</p>
              </div>
            </div>
          </div>

          <div class="mb-4" *ngIf="item.type=='two'">
            <div class="d-flex align-items-end flex-column">
              <div class="d-flex align-items-center justify-content-end mb-2">
                <small> {{item.createdAt |timeago}}</small>
                <h6 class="text-dark ms-2 fw-bold fs-6">{{item.name}}</h6>
                <div class="position-relative">
                  <img class="chat-img ms-2 rounded-circle" [src]="item.img" alt="item.type">
                  <div class="pulse position-absolute user-active"[class.active-user]="activeUser"></div>
                </div>
              </div>
              <div class="w-fit-content chat-text p-3 text-two round  position-relative d-flex justify-content-end">
                <p class="fs-8 text-dark lh-sm">{{item.text}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="message p-3 bg-white w-100 position-fixed">
        <form class="mb-2" [formGroup]="formSend">
          <textarea #message class="form-control bg-transparent border-0" formControlName="message" name="message" placeholder="Type a message" ></textarea>
        </form>
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <a class="text-muted-color mx-2"  (click)="fileInput.click()"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
              <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
            </svg></a>
            <input hidden (change)="onFileSelected($event)" #fileInput type="file" accept=".doc,.pdf,.ppt,.txt" id="file">

            <a class="text-muted-color mx-2"  (click)="fileInput2.click()"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
              <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
              <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
            </svg></a>
            <input hidden (change)="onFileSelected($event)" #fileInput2 type="file" accept="image" id="file">
          </div>
          <div>
            <button class="bg-main-color text-white round p-2 px-3 border-0" [disabled]="!formSend.valid" (click)="addToChat(t,message)">send</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>





